# Gitlab CI/CD Runner

### 부제 : MFC 프로젝트에 CI/CD 도입하기

먼저 `CI/CD`에 대해서 간단하게 알아보자.

![9e23f039e79b4c9e-thumbnail-1920x1080-70](https://user-images.githubusercontent.com/37237145/187940125-f8dd6561-2b02-48d4-bef5-590c1c2119a0.jpeg)

출처=깃랩

결론은 개발부터 빌드, 배포까지의 전 과정을 자동화해서 업무 효율을 높이는 것을 의미한다고 생각한다.

현재 회사의 프로세스는 다음과 같다.

---

1. 로컬 PC에서 개발
2. 빌드
3. 테스트
4. **성공이면 (개발기) SVN commit**
5. **빌드 서버 접속** 
6. **(개발기) SVN update 후 빌드** 
7. **(개발기) 배포**
8. **(개발기) 배포 성공하면 4~8의 과정을 동일하게 (운영기) 진행**

~~❌  가장 불편했던 중앙집중관리식 SVN도 Gitlab 도입으로 변경 중 ..~~ 

~~한 프로젝트는 한 사람만 수정 및 배포할 수 있다는 … 일정 꼬이는 경우 빈번~~ 


이상적인 프로세스는 다음과 같다 

---

1. 로컬 PC에서 개발
2. 빌드 
3. 테스트
4. **Gitlab commit** 
5. **CI를 통해 빌드 및 테스트 결과 받아봄**
6. **(개발기) 배포**
7. **(운영기) 진행**

---

모듈화가 그래도 잘 되어있어서 전체 빌드는 하지 않지만 … 그래도 시간이 많이 소요된다. 원인은 ?

1. 직접 개발서버 접속
2. 수정한 부분 update 후, 빌드
3. 개발기/운영기 분리 
    
    ⇒ 이건 안정성을 위해 백업한다고 생각하면 불필요한 프로세스는 아닌듯하다
    

**👍 장점** 

1. commit 만으로도 운영기 빌드 오류가 없는지 확인 가능
2. 여러 개발자들이 동시에 작업해도 자동/주기적으로 빌드 및 테스트 되어 정기적으로 공유 레포에 통합 됨
3. build 결과물 (실행파일, dll 등) 을 받아볼 수 있음 
4. 소스 통합과 검증에 들어가는 시간이 단축
5. 통합 시 발생할 수 있는 문제점 파악 가능
6. 다른 모듈과의 충돌을 조기에 발견 (코드를 통합하기 전, 테스트가 가능 …!)

### Gitlab CI/CD란 ?

**Continuous Integration ⇒ 지속적 통합**

- 코드 충돌 방지
- 코드 변경 사항이 버그 테스트를 거쳐 병합 됨

**Continuous Delivery** 

- 유효한 코드를 배포(운영) 가능 환경의 레포지토리에 릴리즈

**Continuous Deployment**

- GitLab/GitHub 등에서 자동 릴리즈

    (형상관리 툴과는 연동이 안되어있지만 파일을 올리면 서버에 자동 배포되는 프로세스는 현재 존재)
        
    

### Visual Studio Win32 MFC Programming에 Gitlab-Runner 도입해 자동 빌드하기

젠킨스, GitLab Runner 모두 테스트 중 

💢 주의할 점 💢

 - 빌드 종속성이 높음. 빌드 순서 정리

 - 수정된 부분만 빌드될 수 있도록 

1. GitLab-Runner 등록하기 (추가 예정)
2. .gitlab-ci.yml 작성 및 적용 (추가 예정)
3. MsBuild.exe 로 MFC Project 빌드하기 (추가 예정)
4. GitLab Runner 실행 (추가 예정)
